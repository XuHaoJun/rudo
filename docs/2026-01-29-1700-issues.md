# 2026-01-29 議題清單

> 生成日期：2026-01-29
> 來源：RLC 回饋驗證 (docs/rlc-feedback-verification.md)

---

## 設計文件遺漏

### P0 - 嚴重

| # | 問題 | 檔案 | 位置 | 狀態 |
|---|------|------|------|------|
| D001 | `safepoint()` API 未記錄 | design-analysis.md | §7 | TODO |
| D002 | 無限迴圈 Stop-Forever 風險未說明 | design-analysis.md | §7 | TODO |
| D003 | 設計文件未提及 `clear_registers()` | design-analysis.md | §7 | TODO |

### P1 - 中等

| # | 問題 | 檔案 | 位置 | 狀態 |
|---|------|------|------|------|
| D004 | `MASK` 機制未記錄 | design-analysis.md | §7 | TODO |
| D005 | Stack conflict 檢測未記錄 | design-analysis.md | §7 | TODO |
| D006 | VTable 優化建議未記錄 | design-analysis.md | §9 | TODO |
| D007 | TLAB 緩衝標記優化建議未記錄 | design-analysis.md | §4 | TODO |

---

## 程式碼/架構問題

### P0 - 嚴重

| # | 問題 | 檔案 | 位置 | 狀態 |
|---|------|------|------|------|
| C001 | 協作式安全點無法應對第三方庫 (tokio, rayon) | heap.rs | check_safepoint | TODO |
| C002 | async/await 狀態機中的 root 追蹤問題 | - | - | TODO |

### P1 - 中等

| # | 問題 | 檔案 | 位置 | 狀態 |
|---|------|------|------|------|
| C003 | GcBox header 40 bytes 過大 | ptr.rs | GcBox | TODO |
| C004 | 原子標記操作可能造成 Cache Coherence 流量 | heap.rs | set_mark | TODO |

### P2 - 低

| # | 問題 | 檔案 | 位置 | 狀態 |
|---|------|------|------|------|
| C005 | 保守堆疊掃描限制精確 GC | scan.rs | conservative | TODO |
| C006 | 無法實現 Compacting/Moving GC | - | - | TODO |

---

## 待解決問題狀態追蹤

### 設計文件更新 (D001-D007)

- [x] D001: 新增 `safepoint()` API 文件到 §7
- [x] D002: 新增無限迴圈風險說明到 §7
- [x] D003: 新增 `clear_registers()` 機制說明到 §7
- [x] D004: 新增 `MASK` 機制說明到 §7
- [x] D005: 新增 Stack conflict 檢測說明到 §7
- [x] D006: 新增 VTable 優化建議到 §9
- [x] D007: 新增 TLAB 緩衝標記建議到 §4

### README 更新

- [x] 新增 `safepoint()` 使用範例
- [x] 新增 Safe Point 說明到 Architecture
- [x] 新增 Stop-Forever 風險警告
- [x] 新增保守掃描限制說明
- [x] 更新 Features：新增 Thread Safety、Parallel Marking
- [x] 更新 Safety & Limitations：移除過時的 "Single-threaded" 說明

### 架構改進 (C001-C006)

- [ ] C001: 研究計時器中斷方案
- [ ] C002: 研究 async Rust 整合方案
- [ ] C003: 評估 VTable 優化實作複雜度
- [ ] C004: 評估 TLAB 緩衝標記方案
- [ ] C005: 研究精確堆疊掃描可行性
- [ ] C006: 更新設計文件說明限制

---

## 參考文件

- RLC 回饋驗證: `docs/rlc-feedback-verification.md`
- 設計文件: `docs/rudo-gc-design-analysis.md`
- 原始碼: `crates/rudo-gc/src/`
